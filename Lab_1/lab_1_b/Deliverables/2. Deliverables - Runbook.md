
### **Part 2: Incident Response Operations

Incident Title: Production Database Connectivity Timeout

Timestamp of Failure: 12:02 PM EST

Scenario: Application reported connection failures; initial indicators suggested network isolation.

Evidence of Injection (Broken State):

(Security Group Rules showing missing MySQL rule)


> RDS Security Group (note security group ID):
> ![](attachment/7af5174e63d1bc467e5239e095187a13.png)
> 
> EC2 Security Group (note security group ID):
> ![](attachment/fa221802159b91cfbfab918a89e34cab.png)
> 
> RDS Security Group Allowing inbound port 3306 access from :
> ![](attachment/11447de2f1a2f3a1e45b1d3fd6176a06.png)
>RDS Security Group after incident creation (inbound/ ingress rule removed):
>![](attachment/d6177932f6e38bd8b4c93ec0e03bbaab.png)

#### **RUNBOOK SECTION 1 — Acknowledge**

1.1 Confirm Alert

Upon receiving the SNS notification email, I verified the alarm state via the CLI to confirm the system was in a breaching state.

**Evidence:** Email alarm notification received at 12:04 PM.

> ![](attachment/c7a1b3e4e31fbdc1fc5872e727927249.png)

- **Command:**
    
    Bash
    
    ```
    aws cloudwatch describe-alarms \
      --alarm-names lab-db-connection-failure \
      --query "MetricAlarms[].StateValue"
    ```
    
- **Result:** `ALARM`
    

**Evidence:** CLI output confirming alarm state.

> ![](attachment/6bdd55c402a192340f7a5435ee1a25ee.png)

#### **RUNBOOK SECTION 2 — Observe**

2.1 Check Application Logs

I queried the centralized CloudWatch logs to identify the specific error signature (DB_CONNECTION_FAILURE) associated with the alarm.

- **Command:**
    
    Bash
    
    ```
    aws logs filter-log-events \
      --log-group-name /aws/ec2/lab-rds-app \
      --filter-pattern "DB_CONNECTION_FAILURE"
    ```
    
- **Result:** The logs returned `(2003, "Can't connect to MySQL server on ... (timed out)")`.
    

Evidence: CLI output showing active error stream.

CLI Output of CloudWatch logs for log group /aws/ec2/lab-rds-app, using  `DB_CONNECTION_FAILURE` filter:

> ![](attachment/c79b78096bdd8df487f9c6cb25115e54.png)![](attachment/a1b35d2670522b431524241810b3e95c.png)

**2.2 Identify Failure Type**

- **Classification:** **Network / Security Group Failure**
    
- **Justification:** The log message explicitly states `timed out` (Error 2003).
    
    - If it were a **Credential** issue, the error would be `Access denied` (1045) because the DB would receive the request and reject it.
        
    - A **Timeout** indicates the request was sent but no response was received, basically the application waiting too long for a response from the destination endpoint. In the majority of cases, this is due to a firewall/Security Group configurations not allowing traffic or the endpoint being slow/unavailable.
        
	- With this in mind i would first check the endpoint's (RDS) security group.
	- Evidence of the of missing security group rule is present:
	>![](attachment/a2cd4b6fbe653fe0fc99c3e0a51139d0.png)
#### **RUNBOOK SECTION 3 — Validate Configuration Sources**

3.1 Retrieve Parameter Store Values

I also verified that the application is attempting to connect to the correct RDS endpoint and port.

- **Command:**
    
    ```bash
    aws ssm get-parameters \
      --names /lab/db/endpoint /lab/db/port /lab/db/name \
      --with-decryption
    ```
    
- **Result:** The correct Endpoint and Port (3306) were returned, ruling out a configuration drift.
    

**Evidence:** SSM Output retrieved from Application EC2.

> ![](attachment/efd5db9d8e9cb4ea3b70e2a183ab9eaf.png)

3.2 Retrieve Secrets Manager Values

I verified the credentials available to the application to ensure they hadn't been corrupted or deleted.

- **Command:**
    
    Bash
    
    ```
    aws secretsmanager get-secret-value --secret-id lab/rds/mysql
    ```
    
- **Result:** Valid JSON payload returned.
    

**Evidence:** Secrets Manager Output retrieved from Application EC2.

> ![](attachment/b3ed8e6acbc98a6e202cac06fa006b73.png)

#### **RUNBOOK SECTION 4 — Containment**

**4.1 Prevent Further Damage**

- **Statement:** System state preserved for recovery. No EC2 restart, credential rotation, or infrastructure redeployment was initiated.
    

#### **RUNBOOK SECTION 5 — Recovery**

5.1 Execution (Remediation)

Having identified the root cause as a Network Block, I audited the RDS Security Group rules. I discovered the Inbound Rule for TCP Port 3306 was missing. I manually restored the rule to allow traffic from the EC2 Security Group.

**Evidence:** Security Group (Broken State).

> ![](attachment/300bb7c50b7439c239a2fa1a1e044a92.png)

**Evidence:** Security Group (Restored State).

> ![](attachment/ebc17dfa8f5d60571b34173905fe4057.png)

5.2 Verification

I verified application connectivity using the public endpoint.

- **Command:** `curl http://<EC2_PUBLIC_IP>/list`
    
- **Result:** The application returned the expected JSON list, indicating the connection to the database was restored.
    

**Evidence:** Functioning webpage after recovery.

> ![](attachment/8329fc89cc2ff984f6eee8480c432957.png)
> ![](attachment/cd9f7df8d8e3ecf30fe69df846dc0f22.png)

#### **RUNBOOK SECTION 6 — Post-Incident Validation**

6.1 Confirm Alarm Clears

I monitored the alarm state to ensure it automatically resolved once the errors stopped.

- **Command:**
    
    Bash
    
    ```
    aws cloudwatch describe-alarms \
      --alarm-name lab-db-connection-failure \
      --query "MetricAlarms[].StateValue"
    ```
    
- **Result:** `OK`
    

**Evidence:** CLI command showing Alarm state OK.

> ![](attachment/1553a8ebbe923b72df58dce4cb271be0.png)

**6.2 Confirm Logs Normalize**

- **Command:** `aws logs filter-log-events ...`
    
- **Result:** No new error logs generated after the fix timestamp.
    

Evidence: CLI output of log filtering and definitive confirmation in CloudWacth Logs

(Note the ingestion times are static for the last error messages, indicating the last logs received).

> ![](attachment/5693050ac4509c929bab681259754cef.png)

However a more definitive log confirmation can be found in the CloudWatch console under Log Management:
>![](attachment/d430d788f24e1655c9a073839194e536.png)

---
